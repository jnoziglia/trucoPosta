<html>

<head>
<script src="https://cdn.socket.io/socket.io-1.3.5.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script>
  var socket = io.connect('http://localhost:3000');
  socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my: 'data' });
  });
  socket.on('devuelvo', function (data) {
	alert(data);
  });

  socket.on('partida', function(data) {
  	$('.juego').html('Partida creada: '+data.partida+ ', esperando jugador...');

  });

  socket.on('disconnected', function(data) {
  	alert('usuario desconectado');
  });

  function logConsola() {
  	//alert('cliquio');
  	socket.emit('log', { msj: 'holis' });
  	
  }

  function crearPartida() {
  	//alert('cliquio');
  	//socket.emit('partidaNueva', { msj: 'holis' });
  	$.post( "/partidas", {fecha:"fruta", player1:5, player2:2} );
  	/*$.ajax({
  		type: "POST",
	    url: '/partidas',
	    data: {fecha:"fruta", player1:1, player2:2}, // or JSON.stringify ({name: 'jonas'}),
	    //success: function(data) { alert('data: ' + data); },
	    contentType: "application/json",
	    dataType: 'json'
	});*/
  }
  function getPartidas(){
  	$.get( "/partidas", function( data ) {
		 data.forEach(function(item){
  			$('.juego').append('<div class="partida">'+item.player1+'</div>');
  		});
	});


  }
  


</script>
<link rel="stylesheet" type="text/css" href="./css">
</head>
<body onload="getPartidas();">
	<a href="javascript:void(0)" onclick="logConsola()">Holis</a>
	<a href="javascript:void(0)" onclick="crearPartida()">Crear partida</a>
	<div class="juego">
		

	</div>
</body>

</html>